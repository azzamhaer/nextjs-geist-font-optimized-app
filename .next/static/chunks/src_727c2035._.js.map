{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/PostCard.tsx"],"sourcesContent":["'use client'\n\nimport React, { useState } from 'react'\nimport { supabase } from '@/lib/supabaseClient'\n\ninterface Post {\n  id: string\n  image_url: string\n  caption: string\n  likes: number\n  user_id: string\n  created_at: string\n}\n\ninterface PostCardProps {\n  post: Post\n}\n\nexport default function PostCard({ post }: PostCardProps) {\n  const [likes, setLikes] = useState(post.likes || 0)\n  const [isLiking, setIsLiking] = useState(false)\n\n  const handleLike = async () => {\n    if (isLiking) return\n    \n    setIsLiking(true)\n    try {\n      const newLikes = likes + 1\n      const { error } = await supabase\n        .from('posts')\n        .update({ likes: newLikes })\n        .eq('id', post.id)\n      \n      if (!error) {\n        setLikes(newLikes)\n      }\n    } catch (error) {\n      console.error('Error liking post:', error)\n    } finally {\n      setIsLiking(false)\n    }\n  }\n\n  return (\n    <div className=\"bg-card border border-border rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\">\n      <div className=\"aspect-square relative\">\n        <img \n          src={post.image_url} \n          alt={post.caption || 'Post image'} \n          className=\"w-full h-full object-cover\"\n          onError={(e) => {\n            const target = e.target as HTMLImageElement\n            target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5YTNhZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIG5vdCBmb3VuZDwvdGV4dD48L3N2Zz4='\n          }}\n        />\n      </div>\n      \n      <div className=\"p-4\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <button\n            onClick={handleLike}\n            disabled={isLiking}\n            className=\"text-sm font-medium text-muted-foreground hover:text-foreground transition-colors disabled:opacity-50\"\n          >\n            {likes} {likes === 1 ? 'like' : 'likes'}\n          </button>\n          <span className=\"text-xs text-muted-foreground\">\n            {new Date(post.created_at).toLocaleDateString()}\n          </span>\n        </div>\n        \n        {post.caption && (\n          <p className=\"text-sm text-foreground leading-relaxed\">\n            {post.caption}\n          </p>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAkBe,SAAS,SAAS,EAAE,IAAI,EAAiB;;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,KAAK,KAAK,IAAI;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,MAAM,aAAa;QACjB,IAAI,UAAU;QAEd,YAAY;QACZ,IAAI;YACF,MAAM,WAAW,QAAQ;YACzB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,+HAAA,CAAA,WAAQ,CAC7B,IAAI,CAAC,SACL,MAAM,CAAC;gBAAE,OAAO;YAAS,GACzB,EAAE,CAAC,MAAM,KAAK,EAAE;YAEnB,IAAI,CAAC,OAAO;gBACV,SAAS;YACX;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;QACtC,SAAU;YACR,YAAY;QACd;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,KAAK,KAAK,SAAS;oBACnB,KAAK,KAAK,OAAO,IAAI;oBACrB,WAAU;oBACV,SAAS,CAAC;wBACR,MAAM,SAAS,EAAE,MAAM;wBACvB,OAAO,GAAG,GAAG;oBACf;;;;;;;;;;;0BAIJ,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,SAAS;gCACT,UAAU;gCACV,WAAU;;oCAET;oCAAM;oCAAE,UAAU,IAAI,SAAS;;;;;;;0CAElC,6LAAC;gCAAK,WAAU;0CACb,IAAI,KAAK,KAAK,UAAU,EAAE,kBAAkB;;;;;;;;;;;;oBAIhD,KAAK,OAAO,kBACX,6LAAC;wBAAE,WAAU;kCACV,KAAK,OAAO;;;;;;;;;;;;;;;;;;AAMzB;GA7DwB;KAAA","debugId":null}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { supabase } from '@/lib/supabaseClient'\nimport PostCard from '@/components/PostCard'\nimport { User } from '@supabase/supabase-js'\n\ninterface Post {\n  id: string\n  image_url: string\n  caption: string\n  likes: number\n  user_id: string\n  created_at: string\n  profiles?: {\n    username: string\n  }\n}\n\nexport default function HomePage() {\n  const [posts, setPosts] = useState<Post[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState('')\n  const [user, setUser] = useState<User | null>(null)\n  const router = useRouter()\n\n  useEffect(() => {\n    const getUser = async () => {\n      const { data: { session } } = await supabase.auth.getSession()\n      setUser(session?.user ?? null)\n      \n      if (!session?.user) {\n        router.push('/auth/login')\n        return\n      }\n      \n      fetchPosts()\n    }\n\n    getUser()\n  }, [router])\n\n  const fetchPosts = async () => {\n    try {\n      setLoading(true)\n      setError('')\n      \n      const { data, error } = await supabase\n        .from('posts')\n        .select(`\n          *,\n          profiles (\n            username\n          )\n        `)\n        .order('created_at', { ascending: false })\n\n      if (error) {\n        console.error('Error fetching posts:', error)\n        setError('Failed to load posts. Please try again.')\n      } else {\n        setPosts(data || [])\n      }\n    } catch (err) {\n      console.error('Error:', err)\n      setError('Something went wrong. Please try again.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleRefresh = () => {\n    fetchPosts()\n  }\n\n  if (!user) {\n    return (\n      <div className=\"flex items-center justify-center min-h-[50vh]\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Redirecting to login...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"flex items-center justify-center min-h-[50vh]\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n            <p className=\"text-muted-foreground\">Loading posts...</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"text-center\">\n          <div className=\"bg-destructive/10 border border-destructive/20 rounded-lg p-6 max-w-md mx-auto\">\n            <p className=\"text-destructive mb-4\">{error}</p>\n            <button\n              onClick={handleRefresh}\n              className=\"bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-primary/90 transition-colors\"\n            >\n              Try Again\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"flex items-center justify-between mb-8\">\n          <h1 className=\"text-2xl font-bold text-foreground\">Latest Posts</h1>\n          <button\n            onClick={handleRefresh}\n            className=\"text-sm text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            Refresh\n          </button>\n        </div>\n\n        {posts.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <div className=\"bg-muted/50 rounded-lg p-8 max-w-md mx-auto\">\n              <h3 className=\"text-lg font-medium text-foreground mb-2\">No posts yet</h3>\n              <p className=\"text-muted-foreground mb-4\">\n                Be the first to share something amazing!\n              </p>\n              <button\n                onClick={() => router.push('/upload')}\n                className=\"bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-primary/90 transition-colors\"\n              >\n                Create First Post\n              </button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {posts.map((post) => (\n              <PostCard key={post.id} post={post} />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}